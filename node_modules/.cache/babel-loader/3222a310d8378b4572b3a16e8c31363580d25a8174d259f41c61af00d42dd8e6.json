{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{AuthContext}from'./AuthContext';import{useNotification}from'./NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5000';function FavoritesList(){const{token}=useContext(AuthContext);const notify=useNotification();const[favorites,setFavorites]=useState([]);const[loading,setLoading]=useState(true);const fetchFavorites=async()=>{setLoading(true);try{const res=await fetch(\"\".concat(API_URL,\"/api/favorites\"),{headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok)throw new Error('Failed to fetch favorites');const data=await res.json();setFavorites(data);}catch(err){notify(err.message,'error');}finally{setLoading(false);}};const removeFavorite=async movieId=>{try{const res=await fetch(\"\".concat(API_URL,\"/api/favorites/\").concat(movieId),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok)throw new Error('Failed to remove favorite');setFavorites(favorites.filter(fav=>fav.movieId!==movieId));notify('Favorite removed','success');}catch(err){notify(err.message,'error');}};useEffect(()=>{if(token)fetchFavorites();},[token]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading favorites...\"});if(!favorites.length)return/*#__PURE__*/_jsx(\"div\",{children:\"No favorites yet.\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Favorites\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:favorites.map(fav=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:fav.title}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>removeFavorite(fav.movieId),children:\"Remove\"})]},fav.movieId))})]});}export default FavoritesList;","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","useNotification","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","FavoritesList","token","notify","favorites","setFavorites","loading","setLoading","fetchFavorites","res","fetch","concat","headers","Authorization","ok","Error","data","json","err","message","removeFavorite","movieId","method","filter","fav","children","length","className","map","title","onClick"],"sources":["C:/Users/Bitrus.ed/Desktop/movie-recommendation-app/frontend/src/FavoritesList.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { AuthContext } from './AuthContext';\r\nimport { useNotification } from './NotificationContext';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nfunction FavoritesList() {\r\n  const { token } = useContext(AuthContext);\r\n  const notify = useNotification();\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchFavorites = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/favorites`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!res.ok) throw new Error('Failed to fetch favorites');\r\n      const data = await res.json();\r\n      setFavorites(data);\r\n    } catch (err) {\r\n      notify(err.message, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeFavorite = async (movieId) => {\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/favorites/${movieId}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!res.ok) throw new Error('Failed to remove favorite');\r\n      setFavorites(favorites.filter(fav => fav.movieId !== movieId));\r\n      notify('Favorite removed', 'success');\r\n    } catch (err) {\r\n      notify(err.message, 'error');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (token) fetchFavorites();\r\n  }, [token]);\r\n\r\n  if (loading) return <div>Loading favorites...</div>;\r\n  if (!favorites.length) return <div>No favorites yet.</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Your Favorites</h2>\r\n      <ul className=\"list-group\">\r\n        {favorites.map(fav => (\r\n          <li key={fav.movieId} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n            <span>{fav.title}</span>\r\n            <button className=\"btn btn-danger btn-sm\" onClick={() => removeFavorite(fav.movieId)}>Remove</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FavoritesList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}