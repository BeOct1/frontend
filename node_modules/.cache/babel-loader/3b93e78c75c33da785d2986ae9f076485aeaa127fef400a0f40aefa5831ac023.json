{"ast":null,"code":"import React,{useEffect,useState}from'react';import{FacebookShareButton,TwitterShareButton,WhatsappShareButton,FacebookIcon,TwitterIcon,WhatsappIcon}from'react-share';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'https://movie-recommendation-app-backend-equ7.onrender.com';function Recommendations(){const[movies,setMovies]=useState([]);const[error,setError]=useState('');useEffect(()=>{const fetchRecommendations=async()=>{const token=localStorage.getItem('token');if(!token)return setError('Login to see recommendations');try{const res=await fetch(\"\".concat(API_URL,\"/api/movies/recommendations\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await res.json();if(res.ok)setMovies(data);else setError(data.message||'Failed to fetch recommendations');}catch(err){setError('Server error');}};fetchRecommendations();},[]);if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-4 container\",style:{maxWidth:500},children:error});if(!movies.length)return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:\"No recommendations yet.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recommended Movies\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-grid\",role:\"list\",\"aria-label\":\"Recommended Movies\",children:[movies.map(movie=>{const shareUrl=window.location.origin+\"/movie/\".concat(movie._id||movie.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-card\",role:\"listitem\",tabIndex:0,\"aria-label\":\"Recommended movie: \".concat(movie.title),children:[movie.posterUrl&&/*#__PURE__*/_jsx(\"img\",{src:movie.posterUrl,alt:movie.title,className:\"card-img-top\",style:{width:'100px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[movie.title,\" \",/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"(\",movie.year||movie.release_date?movie.year||movie.release_date.substring(0,4):'N/A',\")\"]})]}),movie.genre&&/*#__PURE__*/_jsx(\"div\",{children:movie.genre}),movie.description&&/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:movie.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2 mt-2 align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Share:\"}),/*#__PURE__*/_jsx(FacebookShareButton,{url:shareUrl,children:/*#__PURE__*/_jsx(FacebookIcon,{size:24,round:true})}),/*#__PURE__*/_jsx(TwitterShareButton,{url:shareUrl,children:/*#__PURE__*/_jsx(TwitterIcon,{size:24,round:true})}),/*#__PURE__*/_jsx(WhatsappShareButton,{url:shareUrl,children:/*#__PURE__*/_jsx(WhatsappIcon,{size:24,round:true})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary btn-sm\",onClick:()=>{navigator.clipboard.writeText(shareUrl);},children:\"Copy Link\"})]})]})]},movie._id||movie.id);}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n          .recommendations-grid {\\n            display: grid;\\n            grid-template-columns: 1fr;\\n            gap: 1.5rem;\\n          }\\n          @media (min-width: 600px) {\\n            .recommendations-grid {\\n              grid-template-columns: repeat(2, 1fr);\\n            }\\n          }\\n          @media (min-width: 900px) {\\n            .recommendations-grid {\\n              grid-template-columns: repeat(4, 1fr);\\n            }\\n          }\\n          .recommendation-card {\\n            background: #fff;\\n            border-radius: 18px;\\n            box-shadow: 0 2px 12px rgba(0,0,0,0.07);\\n            overflow: hidden;\\n            display: flex;\\n            flex-direction: column;\\n            outline: none;\\n            transition: transform 0.3s, box-shadow 0.3s;\\n            cursor: pointer;\\n          }\\n          .recommendation-card:focus {\\n            box-shadow: 0 0 0 3px #f59e42;\\n          }\\n          .recommendation-card:hover {\\n            transform: scale(1.04);\\n            box-shadow: 0 8px 32px rgba(0,0,0,0.13);\\n          }\\n        \"})]})]});}export default Recommendations;","map":{"version":3,"names":["React","useEffect","useState","FacebookShareButton","TwitterShareButton","WhatsappShareButton","FacebookIcon","TwitterIcon","WhatsappIcon","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","Recommendations","movies","setMovies","error","setError","fetchRecommendations","token","localStorage","getItem","res","fetch","concat","headers","data","json","ok","message","err","className","style","maxWidth","children","length","role","map","movie","shareUrl","window","location","origin","_id","id","tabIndex","title","posterUrl","src","alt","width","year","release_date","substring","genre","description","url","size","round","onClick","navigator","clipboard","writeText"],"sources":["C:/Users/Bitrus.ed/Desktop/movie-recommendation-app/frontend/src/Recommendations.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { FacebookShareButton, TwitterShareButton, WhatsappShareButton, FacebookIcon, TwitterIcon, WhatsappIcon } from 'react-share';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'https://movie-recommendation-app-backend-equ7.onrender.com';\r\n\r\nfunction Recommendations() {\r\n  const [movies, setMovies] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchRecommendations = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return setError('Login to see recommendations');\r\n      try {\r\n        const res = await fetch(`${API_URL}/api/movies/recommendations`, {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        const data = await res.json();\r\n        if (res.ok) setMovies(data);\r\n        else setError(data.message || 'Failed to fetch recommendations');\r\n      } catch (err) {\r\n        setError('Server error');\r\n      }\r\n    };\r\n    fetchRecommendations();\r\n  }, []);\r\n\r\n  if (error) return <div className=\"alert alert-danger mt-4 container\" style={{maxWidth: 500}}>{error}</div>;\r\n  if (!movies.length) return <div className=\"container mt-4\">No recommendations yet.</div>;\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h2>Recommended Movies</h2>\r\n      <div className=\"recommendations-grid\" role=\"list\" aria-label=\"Recommended Movies\">\r\n        {movies.map(movie => {\r\n          const shareUrl = window.location.origin + `/movie/${movie._id || movie.id}`;\r\n          return (\r\n            <div\r\n              className=\"recommendation-card\"\r\n              key={movie._id || movie.id}\r\n              role=\"listitem\"\r\n              tabIndex={0}\r\n              aria-label={`Recommended movie: ${movie.title}`}\r\n            >\r\n              {movie.posterUrl && <img src={movie.posterUrl} alt={movie.title} className=\"card-img-top\" style={{width: '100px'}} />}\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">{movie.title} <small className=\"text-muted\">({movie.year || movie.release_date ? (movie.year || movie.release_date.substring(0, 4)) : 'N/A'})</small></h5>\r\n                {movie.genre && <div>{movie.genre}</div>}\r\n                {movie.description && <p className=\"card-text\">{movie.description}</p>}\r\n                <div className=\"d-flex gap-2 mt-2 align-items-center\">\r\n                  <span>Share:</span>\r\n                  <FacebookShareButton url={shareUrl}><FacebookIcon size={24} round /></FacebookShareButton>\r\n                  <TwitterShareButton url={shareUrl}><TwitterIcon size={24} round /></TwitterShareButton>\r\n                  <WhatsappShareButton url={shareUrl}><WhatsappIcon size={24} round /></WhatsappShareButton>\r\n                  <button className=\"btn btn-outline-secondary btn-sm\" onClick={() => {navigator.clipboard.writeText(shareUrl)}}>Copy Link</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <style>{`\r\n          .recommendations-grid {\r\n            display: grid;\r\n            grid-template-columns: 1fr;\r\n            gap: 1.5rem;\r\n          }\r\n          @media (min-width: 600px) {\r\n            .recommendations-grid {\r\n              grid-template-columns: repeat(2, 1fr);\r\n            }\r\n          }\r\n          @media (min-width: 900px) {\r\n            .recommendations-grid {\r\n              grid-template-columns: repeat(4, 1fr);\r\n            }\r\n          }\r\n          .recommendation-card {\r\n            background: #fff;\r\n            border-radius: 18px;\r\n            box-shadow: 0 2px 12px rgba(0,0,0,0.07);\r\n            overflow: hidden;\r\n            display: flex;\r\n            flex-direction: column;\r\n            outline: none;\r\n            transition: transform 0.3s, box-shadow 0.3s;\r\n            cursor: pointer;\r\n          }\r\n          .recommendation-card:focus {\r\n            box-shadow: 0 0 0 3px #f59e42;\r\n          }\r\n          .recommendation-card:hover {\r\n            transform: scale(1.04);\r\n            box-shadow: 0 8px 32px rgba(0,0,0,0.13);\r\n          }\r\n        `}</style>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Recommendations;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}