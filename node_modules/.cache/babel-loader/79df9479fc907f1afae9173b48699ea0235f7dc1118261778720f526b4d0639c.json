{"ast":null,"code":"import _objectSpread from\"C:/Users/Bitrus.ed/Desktop/movie-recommendation-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext}from'react';import{AuthContext}from'./AuthContext';import{useNotification}from'./NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const[form,setForm]=useState({username:'',email:'',password:''});const[message,setMessage]=useState('');const[errors,setErrors]=useState({});const[showPassword,setShowPassword]=useState(false);const[loading,setLoading]=useState(false);const{login}=useContext(AuthContext);const notify=useNotification();const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const validate=()=>{const errs={};if(!form.username)errs.username='Username is required';if(!form.email)errs.email='Email is required';if(!form.password)errs.password='Password is required';else if(form.password.length<6)errs.password='Password must be at least 6 characters';return errs;};const handleSubmit=async e=>{e.preventDefault();setMessage('');const errs=validate();setErrors(errs);if(Object.keys(errs).length>0)return;setLoading(true);try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'http://localhost:5000',\"/api/auth/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(form),credentials:'include'});const data=await res.json();setLoading(false);if(res.ok&&data.token){localStorage.setItem('token',data.token);login(data.user||{},data.token);setMessage('Registration successful!');notify('Registration successful!','success');}else{setMessage(data.message||'Registration failed');notify(data.message||'Registration failed','error');}}catch(err){setMessage('Server error');notify('Server error','error');setLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"needs-validation\",noValidate:true,style:{gap:24,display:'flex',flexDirection:'column'},\"aria-label\":\"Registration Form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerUsername\",className:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control rounded-3\".concat(errors.username?' is-invalid':''),id:\"registerUsername\",name:\"username\",placeholder:\"Username\",value:form.username,onChange:handleChange,required:true,autoComplete:\"username\"}),errors.username&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",\"aria-live\":\"polite\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerEmail\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control rounded-3\".concat(errors.email?' is-invalid':''),id:\"registerEmail\",name:\"email\",type:\"email\",placeholder:\"Email\",value:form.email,onChange:handleChange,required:true,autoComplete:\"email\"}),errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",\"aria-live\":\"polite\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3 position-relative\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerPassword\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control rounded-3\".concat(errors.password?' is-invalid':''),id:\"registerPassword\",name:\"password\",type:showPassword?'text':'password',placeholder:\"Password\",value:form.password,onChange:handleChange,required:true,autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"show-password-btn\",\"aria-label\":showPassword?'Hide password':'Show password',onClick:()=>setShowPassword(v=>!v),tabIndex:0,children:showPassword?'Hide':'Show'}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",\"aria-live\":\"polite\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning w-100 py-2 fw-bold\",type:\"submit\",style:{fontSize:18,borderRadius:24,transition:'box-shadow 0.3s'},disabled:loading,children:loading?'Registering...':'Register'}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info mt-3\",\"aria-live\":\"polite\",children:message})]});}export default Register;","map":{"version":3,"names":["React","useState","useContext","AuthContext","useNotification","jsx","_jsx","jsxs","_jsxs","Register","form","setForm","username","email","password","message","setMessage","errors","setErrors","showPassword","setShowPassword","loading","setLoading","login","notify","handleChange","e","_objectSpread","target","name","value","validate","errs","length","handleSubmit","preventDefault","Object","keys","res","fetch","concat","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","credentials","data","json","ok","token","localStorage","setItem","user","err","onSubmit","className","noValidate","style","gap","display","flexDirection","children","htmlFor","id","placeholder","onChange","required","autoComplete","type","onClick","v","tabIndex","fontSize","borderRadius","transition","disabled"],"sources":["C:/Users/Bitrus.ed/Desktop/movie-recommendation-app/frontend/src/Register.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { AuthContext } from './AuthContext';\r\nimport { useNotification } from './NotificationContext';\r\n\r\nfunction Register() {\r\n  const [form, setForm] = useState({ username: '', email: '', password: '' });\r\n  const [message, setMessage] = useState('');\r\n  const [errors, setErrors] = useState({});\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const { login } = useContext(AuthContext);\r\n  const notify = useNotification();\r\n\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const validate = () => {\r\n    const errs = {};\r\n    if (!form.username) errs.username = 'Username is required';\r\n    if (!form.email) errs.email = 'Email is required';\r\n    if (!form.password) errs.password = 'Password is required';\r\n    else if (form.password.length < 6) errs.password = 'Password must be at least 6 characters';\r\n    return errs;\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setMessage('');\r\n    const errs = validate();\r\n    setErrors(errs);\r\n    if (Object.keys(errs).length > 0) return;\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/auth/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(form),\r\n        credentials: 'include',\r\n      });\r\n      const data = await res.json();\r\n      setLoading(false);\r\n      if (res.ok && data.token) {\r\n        localStorage.setItem('token', data.token);\r\n        login(data.user || {}, data.token);\r\n        setMessage('Registration successful!');\r\n        notify('Registration successful!', 'success');\r\n      } else {\r\n        setMessage(data.message || 'Registration failed');\r\n        notify(data.message || 'Registration failed', 'error');\r\n      }\r\n    } catch (err) {\r\n      setMessage('Server error');\r\n      notify('Server error', 'error');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"needs-validation\" noValidate style={{ gap: 24, display: 'flex', flexDirection: 'column' }} aria-label=\"Registration Form\">\r\n      <div className=\"form-floating mb-3\">\r\n        <label htmlFor=\"registerUsername\" className=\"form-label\">Username</label>\r\n        <input\r\n          className={`form-control rounded-3${errors.username ? ' is-invalid' : ''}`}\r\n          id=\"registerUsername\"\r\n          name=\"username\"\r\n          placeholder=\"Username\"\r\n          value={form.username}\r\n          onChange={handleChange}\r\n          required\r\n          autoComplete=\"username\"\r\n        />\r\n        {errors.username && <div className=\"invalid-feedback\" aria-live=\"polite\">{errors.username}</div>}\r\n      </div>\r\n      <div className=\"form-floating mb-3\">\r\n        <label htmlFor=\"registerEmail\" className=\"form-label\">Email</label>\r\n        <input\r\n          className={`form-control rounded-3${errors.email ? ' is-invalid' : ''}`}\r\n          id=\"registerEmail\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={form.email}\r\n          onChange={handleChange}\r\n          required\r\n          autoComplete=\"email\"\r\n        />\r\n        {errors.email && <div className=\"invalid-feedback\" aria-live=\"polite\">{errors.email}</div>}\r\n      </div>\r\n      <div className=\"form-floating mb-3 position-relative\">\r\n        <label htmlFor=\"registerPassword\" className=\"form-label\">Password</label>\r\n        <input\r\n          className={`form-control rounded-3${errors.password ? ' is-invalid' : ''}`}\r\n          id=\"registerPassword\"\r\n          name=\"password\"\r\n          type={showPassword ? 'text' : 'password'}\r\n          placeholder=\"Password\"\r\n          value={form.password}\r\n          onChange={handleChange}\r\n          required\r\n          autoComplete=\"new-password\"\r\n        />\r\n        <button type=\"button\" className=\"show-password-btn\" aria-label={showPassword ? 'Hide password' : 'Show password'} onClick={() => setShowPassword(v => !v)} tabIndex={0}>\r\n          {showPassword ? 'Hide' : 'Show'}\r\n        </button>\r\n        {errors.password && <div className=\"invalid-feedback\" aria-live=\"polite\">{errors.password}</div>}\r\n      </div>\r\n      <button className=\"btn btn-warning w-100 py-2 fw-bold\" type=\"submit\" style={{ fontSize: 18, borderRadius: 24, transition: 'box-shadow 0.3s' }} disabled={loading}>{loading ? 'Registering...' : 'Register'}</button>\r\n      {message && <div className=\"alert alert-info mt-3\" aria-live=\"polite\">{message}</div>}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}